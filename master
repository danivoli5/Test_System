#pragma once
#include <direct.h>
#include <string>
#include <iostream>
#include<fstream>
#include<Windows.h>
#include"course.h"
#include"Details.h"
#include "Teacher.h"
using namespace std;

int cutFunction()
{
	keybd_event(VK_LWIN, 0, 0, 0);
	keybd_event(VK_SHIFT, 0, 0, 0);
	keybd_event(0x53, 0, 0, 0);
	return 0;
}

int main()
{
	ofstream coor, student, teach;
	coor.open("coordinators.txt");
	coor.close();
	student.open("students.txt");
	student.close();
	teach.open("teacher.txt");
	teach.close();
	int person, index,index2;
	Details all;
	Details temp;
	string name, semester, str, lecturer, subjects, due, Pname, sub, temp2;
	int year, difficulty, num;
	long phone, pass,password;
	do
	{
		cout << "who are you? enter a number: \n 1.coordinator, 2.proffesor, 3.student\n";
		cin >> person;
		switch (person)
		{
		case 1:
			cout << "choose:\n1.enter a new teacher, 2.remove a teacher, 3.enter to your account, 4.creat an account" << endl;
			cout << "5.add a new student, 6. remove a student " << endl;
			cin >> index;
			if (index == 1)
			{
				cout << "enter the name: ";
				cin >> Pname;
				cout << "\nenter phone number: ";
				cin >> phone;
				cout << "\nenter subject: ";
				cin >> sub;
				cout << "\n enter password: ";
				cin >> pass;
				Teacher teacher(Pname, sub, phone, pass);
				teach.open("teacher.txt", ios::app);
				teach << Pname << endl;
				teach<< pass << endl;
				teach.close();
			}
			if (index==2)
			{
				//remove a teacher
			}
			if (index == 3)
			{
				cout << "enter your name and password";
				password = 8565656;
				Pname = name;
				pass = password;
				if (password != pass|| Pname!=name)
				{
					cout << "wrong name or password. please try again" << endl;
					break;
				}
				else
				{
					do
					{
						cout << "enter a number: 0. exit 1.add an answer 2.delete a question 3.add a question 4. open a question\n 5. to cut a question ";
						cin >> num;
						switch (num) 
						{
						case 1:
							//add an answer
							break;

						case 2:
							//delete a question
							cout << "enter the name, semester, lecturer, subjects, due, year and difficulty" << endl;
							cin >> name >> semester >> lecturer >> subjects >> due >> year >> difficulty;
							break;

						case 3:
							//לגזור ולהדביק את השאלה לקובץ
							cout << "enter the name, semester, lecturer, subjects, due, year and difficulty" << endl;
							cin >> name >> semester >> lecturer >> subjects >> due >> year >> difficulty;
							temp.addDetails(name, semester, lecturer, subjects, year, difficulty, due);
							all.addDetails(temp);
							break;
						case 4:
							cout << "enter the name, semester, lecturer, subjects, due, year and difficulty" << endl;
							cin >> name >> semester >> lecturer >> subjects >> due >> year >> difficulty;
							all.openInfo(name, semester, lecturer, subjects, year, difficulty, due);
							break;
						case 5:
							cout << "you have 15 seconds to cut your question" << endl;
							cutFunction();
						}

					} while (num != 0);
				}
			}
			if (index== 4)
			{
				cout << "enter your name : " << endl;
				cin >> Pname;
				cout << "enter password : " << endl;
				cin >> pass;
				coor.open("coordinators.txt", ios::app);
				coor << Pname << endl;
				coor << pass << endl;
				coor.close();
			}
			if (index == 5)
			{
				cout << "enter name and password" << endl;
				cin >> Pname >> pass;
				student.open("students.txt", ios::app);
			}
			if (index == 6)
			{
				//remove student
			}
			break;
				
		case 2:
			cout << "enter 0 to exit, enter 1 to search a question" << endl;
			cin >> index2;
			if (index2 == 0)
				break;
			else if (index2 == 1) {
				cout << "enter the name, semester, lecturer, subjects, due, year and difficulty" << endl;
				cin >> name >> semester >> lecturer >> subjects >> due >> year >> difficulty;
				all.openInfo(name, semester, lecturer, subjects, year, difficulty, due);
			}
			break;
		case 3:
			cout << "enter 0 to exit, enter 1 to search a question" << endl;
			cin >> index2;
			if (index2 == 0)
				break;
			else if (index2 == 1) {
				cout << "enter the name, semester, lecturer, subjects, due, year and difficulty" << endl;
				cin >> name >> semester >> lecturer >> subjects >> due >> year >> difficulty;
				all.openInfo(name, semester, lecturer, subjects, year, difficulty, due);
			}
			break;
		}
	}
	while (person != 0);

	return 0;
}
